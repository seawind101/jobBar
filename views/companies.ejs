<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Companies</title>
    <link rel="stylesheet" href="/css/index.css">
    <link rel="stylesheet" href="/css/companies.css">
    <script defer src="/js/searchJobs.js"></script>
</head>
<body>
    <header>
        <h1>Classroom Companies</h1>
                <div>
                        <button onclick="location.href='/'">Home</button>
                        <button onclick="location.href='/allJobs'">All Jobs</button>
                        <% if (isManager) { %>
                            <button onclick="location.href='/post'">Create a Company</button>
                        <% } %>
                </div>
                <input type="text" id="searchbar" placeholder="Search...">
    </header>
    <section>
        <div id="resourceCont">
            <%  if (companies && companies.length > 0) { %>
                <ul>
                    <% companies.forEach(company => { %>
                        <div class="company-item" style="background-color: <%= company.pColor %>; color: <%= company.bpColor %>;">
                            <strong><%= company.name %></strong>
                            <p><%= company.description %></p>
                            <a href="<%= company.link %>" target="_blank" style="background-color: <%= company.sColor %>; color: <%= company.bsColor %>;">Visit</a>
                            <a href="/job/<%= encodeURIComponent(company.name) %>" class="btn-jobs" style="background-color: <%= company.sColor %>; color: <%= company.bsColor %>">View Jobs</a>
                        </div>
                    <% }); %>
                </ul>
            <% } else { %>
                <p>No companies yet.</p>
            <% } %>
        </div>
    </section>
</body>
        <script>
            document.addEventListener('DOMContentLoaded', function(){
                if (window.jobSearchInit) window.jobSearchInit('searchbar', { selector: '.company-item' });
            });
        </script>
</html>